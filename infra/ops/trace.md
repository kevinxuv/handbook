# Trace

调用链追踪
soa服务化已经是解耦大型系统的通用技术方案，随着服务化的大量应用，带来了很多技术上面的问题，服务治理、服务配置管理、服务调用链追踪等，而服务调用链追踪作为生产排障最重要的工具，当然显得格外重要。

当前各家公司的内部rpc协议不一样，假如用的是购买的soa服务框架，那trace是自带的，如果是自研的，那rpc协议不尽相同，所以trace也就需要自研，理论或者原理都是一样，根据一个trace_id把整个调用链穿起来，难点在于存储的设计，trace的数据量大，且并发高，虽然对实时性要求不高，但是由于对trace做业务报警和监控的依赖越来越严重，trace的实时性要求也比较高，这就考验了做trace开发的数据库设计能力，传统的关系型数据库中间件，比如MySQL、postgresql、其实不是用来做这类需求的，这种数据是KV类型的，用KV型nosql数据库存储会更好，比如：rocksdb、leveldb、MongoDB、cassandra，存储问题解决了其实解决了50%的问题，剩下的就是trace服务的实现和集群的组件，存储性能如果满足不了的话，可以做分片，最快的方法就是通过proxy的方法分片。
